# Настройки системы

## Общие настройки

### Основные параметры

1. **Название системы**
   - Отображаемое имя в веб-интерфейсе
   - Используется в уведомлениях и письмах

2. **URL системы**
   - Базовый URL для генерации ссылок
   - Должен быть указан с протоколом (https://)

3. **Язык интерфейса**
   - Доступные языки: Русский, Английский
   - По умолчанию: Русский

4. **Часовой пояс**
   - Формат: Europe/Moscow, Asia/Yekaterinburg
   - Влияет на отображение времени в интерфейсе

## Настройки безопасности

### Аутентификация

1. **Политика паролей**
   - Минимальная длина: 12 символов
   - Требования к сложности:
     - Минимум 1 заглавная буква
     - Минимум 1 цифра
     - Минимум 1 специальный символ
   - Срок действия пароля: 90 дней
   - Запрет повторного использования: 5 последних паролей

2. **Двухфакторная аутентификация**
   - Обязательная для администраторов
   - Поддерживаемые приложения: Google Authenticator, Authy
   - Резервные коды для восстановления

3. **Блокировка при подборе пароля**
   - Максимальное количество попыток: 5
   - Время блокировки: 30 минут
   - Уведомление администратора при блокировке

### Сессии

1. **Время жизни сессии**
   - Веб-интерфейс: 8 часов
   - API токены: 30 дней
   - Refresh токены: 90 дней

2. **Ограничение сессий**
   - Максимум активных сессий: 5
   - Уведомление о новых входах
   - Возможность завершить другие сессии

## Настройки сети

### Основные параметры

1. **Порты**
   - Веб-интерфейс: 443 (HTTPS), 80 (HTTP с редиректом)
   - API: 443 (HTTPS)
   - Xray: 443 (TLS), 80 (HTTP/2)

2. **Ограничение доступа**
   - Разрешенные IP-адреса (CIDR)
   - Запрещенные страны
   - Блокировка подозрительных IP

### Настройки прокси

1. **Поддержка IPv6**
   - Включить/выключить
   - Настройки туннелирования

2. **MTU**
   - Значение по умолчанию: 1500
   - Автонастройка: Включено

## Настройки уведомлений

### Email-уведомления

1. **SMTP сервер**
   - Адрес сервера
   - Порт (587 для STARTTLS, 465 для SSL)
   - Имя пользователя и пароль
   - Шифрование: STARTTLS/SSL

2. **Шаблоны писем**
   - Приветственное письмо
   - Сброс пароля
   - Уведомления о безопасности
   - Мониторинг

### Push-уведомления

1. **Telegram бот**
   - Токен бота
   - ID чата для уведомлений
   - Типы уведомлений

2. **Webhook**
   - URL эндпоинта
   - Метод запроса
   - Заголовки
   - Формат данных (JSON/XML)

## Настройки Xray

### Основные параметры

1. **Версия Xray**
   - Рекомендуемая: последняя стабильная
   - Автообновление: Включено

2. **Протоколы**
   - Доступные: VMESS, VLESS, Trojan, Shadowsocks
   - Шифрование по умолчанию
   - Настройки дешифрования

### Оптимизация

1. **Буферы**
   - Размер буфера ввода/вывода
   - Таймауты

2. **Маршрутизация**
   - Политика маршрутизации
   - Настройки DNS
   - Правила обхода

## Резервное копирование

### Автоматическое резервное копирование

1. **Расписание**
   - Ежедневно в 2:00
   - Еженедельно в воскресенье в 3:00
   - Ежемесячно 1-го числа в 4:00

2. **Хранилище**
   - Локальное хранилище
   - Облачное хранилище (S3, Google Drive)
   - SFTP сервер

### Восстановление

1. **Из локальной копии**
   - Выбор из списка
   - Предпросмотр
   - Подтверждение

2. **Из внешнего источника**
   - Загрузка файла
   - Указание пути
   - Проверка целостности

## Системные требования

### Минимальные
- 1 ядро CPU
- 1 ГБ ОЗУ
- 10 ГБ дискового пространства

### Рекомендуемые
- 2+ ядра CPU
- 4 ГБ ОЗУ
- 50 ГБ дискового пространства
- SSD накопитель

## Логирование

### Уровни логирования
1. **Отладка** (Debug)
   - Подробная отладочная информация
   - Используется при разработке

2. **Информация** (Info)
   - Основные события системы
   - Рекомендуется для продакшена

3. **Предупреждения** (Warning)
   - Нештатные ситуации
   - Требуют внимания

4. **Ошибки** (Error)
   - Критические ошибки
   - Требуют немедленного вмешательства

### Ротация логов
- По размеру: 100 МБ
- По времени: Ежедневно
- Хранение: 30 дней

## API

### Ключи API
- Создание и управление
- Ограничение прав
- Срок действия

### Документация
- Swagger UI
- OpenAPI спецификация
- Примеры запросов

## Обновление системы

### Автоматическое обновление
- Включить/выключить
- Расписание проверки обновлений
- Уведомления о доступных обновлениях

### Ручное обновление
1. Проверка обновлений
2. Создание резервной копии
3. Установка обновления
4. Проверка работоспособности

## Мониторинг

### Встроенный мониторинг
- Загрузка CPU
- Использование памяти
- Дисковое пространство
- Сетевой трафик

### Интеграция с внешними системами
- Prometheus
- Grafana
- Zabbix
- Nagios

## Расширенные настройки

### Переменные окружения
- Переопределение настроек
- Конфиденциальные данные
- Настройки среды (dev/stage/prod)

### Кастомные скрипты
- Pre-start скрипты
- Post-update скрипты
- Кастомные проверки

## Восстановление системы

### Безопасный режим
- Загрузка с минимальными настройками
- Отключение плагинов
- Диагностика проблем

### Восстановление пароля
1. Загрузка в режиме восстановления
2. Подтверждение личности
3. Установка нового пароля

## Экспорт/Импорт

### Экспорт настроек
- Полная конфигурация
- Выборочный экспорт
- Форматы: JSON, YAML

### Импорт настроек
- Проверка совместимости
- Предпросмотр изменений
- Подтверждение импорта
